---
layout: post
title: .Net Core项目摸索学习（三）
subtitle: 总结站点内对微服务请求的服务实现
date: 2018-05-30
author: Dunbreak
header-img: img/post-bg-greatdesign.jpg
catalog: true
tags:
    - .Net Core
    - C#
    - 总结
---

项目中一大半的逻辑都是通过调用微服务实现的，那这些个微服务要怎么调用才好，不能每次调用微服务就自己写一个Http的请求方法吧。因为这个原因，需要编写一个为微服务的调用服务来实现统一的微服务调用。

当前我们所调用的微服务都是通过RESTful的Http Api的形式提供的，所以微服务的调用服务其实就是一个统一的Http请求的方法，通过请求参数，返回请求结果。这么一说其实这个服务很好写，就写一个WebRequest或者HttpClient的方法，处理处理参数就可以用了。但是和上面一样，不想写 `using` 语句的我也同样厌烦了拼接调用接口之前的那些个参数，有没有啥好方法把这个服务也写的优雅一点呢？然后我发现，因为是RESTful的微服务，所以所有的接口其实都可以转换为两个模型： `RequestModel` 和 `ResponseModel`。 `RequestModel` 用来存放请求的参数进行微服务请求，权限验证等； `ResponseModel` 即为微服务接口的响应模型。那这样就好做了，可以把所有微服务都模拟为这两个模型，然后请求微服务其实就是调用一个参数是 `RequestModel` 返回值是 `ResponseModel` 的一个方法，而处理模型中的参数，自然而然就想到了反射。